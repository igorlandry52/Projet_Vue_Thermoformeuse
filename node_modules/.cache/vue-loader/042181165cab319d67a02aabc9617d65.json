{"remainingRequest":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\src\\views\\logs.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\src\\views\\logs.vue","mtime":1592129450085},{"path":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ngaleu alain\\Documents\\projet\\new_projet\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgcmVjaGVyY2hlOiAnJywKICAgIGhlYWRlcnM6IFsKICAgICAgewogICAgICAgIHRleHQ6ICJOb20gZCd1dGlsaXNhdGV1ciIsCiAgICAgICAgYWxpZ246ICdsZWZ0JywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgdmFsdWU6ICduYW1lJwogICAgICB9LAogICAgICB7IHRleHQ6ICdEYXRlJywgdmFsdWU6ICdkYXRlJyB9LAogICAgICB7IHRleHQ6ICdFdGF0JywgdmFsdWU6ICdldGF0JyB9LAogICAgICB7IHRleHQ6ICdEdXLDqWUgKHNlY29uZGVzKScsIHZhbHVlOiAnZHVyw6llJyB9LAogICAgICB7IHRleHQ6ICdBY3Rpb25zJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlIH0sCiAgICBdLAogICAgbG9nczogW10KICB9KSwKCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmluaXRpYWxpemUoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGluaXRpYWxpemUgKCkgewogICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC8iLCB7CiAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KFsiZ2V0X3RlbXBfbG9nIl0pLAogICAgICAgICAgaGVhZGVycyA6IHsKICAgICAgICAgICAgIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiI6ICIqIiwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICBsZXQgYXJyYXlEYXRhID0gW107CiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7CiAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZGF0YVtrZXldOwogICAgICAgICAgICAgIGFycmF5RGF0YS5wdXNoKGVsZW1lbnQpOyAKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5sb2dzID0gYXJyYXlEYXRhOwogICAgICAgIH0pOwogICAgICB9LCAxMDApOwogICAgfSwKCiAgICBkZWxldGVJdGVtIChpdGVtKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5sb2dzLmluZGV4T2YoaXRlbSk7CiAgICAgIGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBpdGVtPycpICYmIAogICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDozMDAwLyIsIHsKICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoWyJkZWxfdGVtcF9sb2ciLCBpbmRleF0pLAogICAgICAgICAgaGVhZGVycyA6IHsKICAgICAgICAgICAgIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiI6ICIqIiwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiByZXMuanNvbigpKTsKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["logs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"logs.vue","sourceRoot":"src/views","sourcesContent":["<!-- <template>\r\n  <div class=\"elevation-1\">\r\n    <v-toolbar flat color=\"white\">\r\n      <v-toolbar-title>Historiques / Logs</v-toolbar-title>\r\n      <v-divider\r\n        class=\"mx-2\"\r\n        inset\r\n        vertical\r\n      ></v-divider>\r\n      <v-spacer></v-spacer>\r\n\t\t\t\t<v-text-field\r\n\t\t\t\t\tv-model=\"recherche\"\r\n\t\t\t\t\tappend-icon=\"mdi-magnify\"\r\n\t\t\t\t\tlabel=\"Recherche\"\r\n\t\t\t\t\tsingle-line\r\n\t\t\t\t\thide-details\r\n\t\t\t\t></v-text-field>\r\n    </v-toolbar>\r\n    <v-data-table\r\n      :headers=\"headers\"\r\n      :items=\"logs\"\r\n      :search=\"recherche\"\r\n    >\r\n      <template v-slot:items=\"props\">\r\n        <td>{{ props.item.name }}</td>\r\n        <td class=\"text-xs-right\">{{ props.item.date }}</td>\r\n        <td class=\"text-xs-right\">{{ props.item.etat }}</td>\r\n        <td class=\"text-xs-right\">{{ props.item.durée }}</td>\r\n      </template>\r\n    </v-data-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    data: () => ({\r\n      dialog: false,\r\n      recherche: '',\r\n      headers: [\r\n        {\r\n          text: \"Nom d'utilisateur\",\r\n          align: 'left',\r\n          sortable: false,\r\n          value: 'name'\r\n        },\r\n        { text: 'Date', value: 'date' },\r\n        { text: 'Etat', value: 'etat' },\r\n        { text: 'Durée (secondes)', value: 'durée' }\r\n      ],\r\n      logs: []\r\n    }),\r\n\r\n    created () {\r\n      this.initialize()\r\n    },\r\n\r\n    methods: {\r\n      initialize () {\r\n        setInterval(() => {\r\n          fetch(\"http://localhost:3000/\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify([\"get_temp_log\"]),\r\n            headers : {\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n              \"Content-Type\": \"application/json\"\r\n            }\r\n          }).then(res => res.json())\r\n          .then(data => {\r\n            this.logs = data;\r\n          });\r\n        }, 100);\r\n      }\r\n    }\r\n  }\r\n</script> -->\r\n\r\n<template>\r\n  <v-data-table\r\n    :headers=\"headers\"\r\n    :items=\"logs\"\r\n    :search=\"recherche\"\r\n    sort-by=\"durée\"\r\n    class=\"elevation-1\"\r\n  >\r\n    <template v-slot:top>\r\n      <v-toolbar flat color=\"white\">\r\n      <v-toolbar-title>Historiques / Logs</v-toolbar-title>\r\n      <v-divider\r\n        class=\"mx-2\"\r\n        inset\r\n        vertical\r\n      ></v-divider>\r\n      <v-spacer></v-spacer>\r\n\t\t\t\t<v-text-field\r\n\t\t\t\t\tv-model=\"recherche\"\r\n\t\t\t\t\tappend-icon=\"mdi-magnify\"\r\n\t\t\t\t\tlabel=\"Recherche\"\r\n\t\t\t\t\tsingle-line\r\n\t\t\t\t\thide-details\r\n\t\t\t\t></v-text-field>\r\n    </v-toolbar>\r\n    </template>\r\n    <template v-slot:item.actions=\"{ item }\">\r\n      <v-icon\r\n        small\r\n        @click=\"deleteItem(item)\"\r\n      >\r\n        mdi-delete\r\n      </v-icon>\r\n    </template>\r\n  </v-data-table>\r\n</template>\r\n\r\n\r\n<script>\r\n  export default {\r\n    data: () => ({\r\n      recherche: '',\r\n      headers: [\r\n        {\r\n          text: \"Nom d'utilisateur\",\r\n          align: 'left',\r\n          sortable: false,\r\n          value: 'name'\r\n        },\r\n        { text: 'Date', value: 'date' },\r\n        { text: 'Etat', value: 'etat' },\r\n        { text: 'Durée (secondes)', value: 'durée' },\r\n        { text: 'Actions', value: 'actions', sortable: false },\r\n      ],\r\n      logs: []\r\n    }),\r\n\r\n    created () {\r\n      this.initialize()\r\n    },\r\n\r\n    methods: {\r\n      initialize () {\r\n        setInterval(() => {\r\n          fetch(\"http://localhost:3000/\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify([\"get_temp_log\"]),\r\n            headers : {\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n              \"Content-Type\": \"application/json\"\r\n            }\r\n          }).then(res => res.json())\r\n          .then(data => {\r\n            let arrayData = [];\r\n            for (const key in data) {\r\n              if (data.hasOwnProperty(key)) {\r\n                const element = data[key];\r\n                arrayData.push(element); \r\n              }\r\n            }\r\n            this.logs = arrayData;\r\n          });\r\n        }, 100);\r\n      },\r\n\r\n      deleteItem (item) {\r\n        const index = this.logs.indexOf(item);\r\n        confirm('Are you sure you want to delete this item?') && \r\n        fetch(\"http://localhost:3000/\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify([\"del_temp_log\", index]),\r\n            headers : {\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n              \"Content-Type\": \"application/json\"\r\n            }\r\n        }).then(res => res.json());\r\n      }\r\n    },\r\n  }\r\n</script>"]}]}